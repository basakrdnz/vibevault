# VibeVault Development Guidelines

Auto-generated from feature plans. Last updated: 2025-01-27

## Active Technologies

### Frontend
- **NextJS 14**: React framework with App Router
- **TypeScript 5.0+**: Type-safe development
- **Tailwind CSS**: Utility-first CSS framework
- **shadcn/ui**: Pre-built accessible components
- **React Hook Form**: Form management
- **Zod**: Schema validation

### Backend
- **NextJS API Routes**: Server-side API endpoints
- **NextAuth.js v4**: Authentication and session management
- **Prisma ORM**: Type-safe database access
- **PostgreSQL**: Primary database
- **Supabase**: Database hosting and real-time features

### Development Tools
- **Jest**: Unit testing framework
- **React Testing Library**: Component testing
- **Playwright**: End-to-end testing
- **ESLint**: Code linting
- **Prettier**: Code formatting

## Project Structure
```
src/
├── app/                    # NextJS 14 App Router
│   ├── (auth)/            # Auth route group
│   │   ├── login/
│   │   ├── register/
│   │   └── layout.tsx
│   ├── api/               # API routes
│   │   ├── auth/
│   │   ├── users/
│   │   └── health/
│   ├── globals.css
│   ├── layout.tsx         # Root layout
│   └── page.tsx           # Landing page
├── components/            # Reusable UI components
│   ├── ui/               # Base UI components
│   ├── auth/             # Auth-specific components
│   └── layout/           # Layout components
├── lib/                  # Utility functions
│   ├── auth.ts           # NextAuth configuration
│   ├── db.ts             # Database connection
│   ├── utils.ts          # General utilities
│   └── validations.ts    # Form validations
├── types/                # TypeScript type definitions
└── styles/               # Additional styles

prisma/
├── schema.prisma         # Database schema
├── migrations/           # Database migrations
└── seed.ts              # Database seeding

public/
├── images/              # Static images
├── icons/               # App icons
└── favicon.ico

tests/
├── __mocks__/           # Test mocks
├── components/          # Component tests
├── pages/               # Page tests
├── api/                 # API tests
└── e2e/                 # End-to-end tests
```

## Commands

### Development
```bash
# Start development server
npm run dev

# Type checking
npm run type-check

# Linting
npm run lint

# Build for production
npm run build
```

### Database
```bash
# Generate Prisma client
npx prisma generate

# Run migrations
npx prisma migrate dev

# Reset database
npx prisma migrate reset

# Open Prisma Studio
npx prisma studio
```

### Testing
```bash
# Unit tests
npm run test

# E2E tests
npm run test:e2e

# All tests
npm run test:all
```

### Deployment
```bash
# Deploy to Vercel
vercel

# Production migration
npx prisma migrate deploy
```

## Code Style

### TypeScript
- Use strict mode
- Prefer interfaces over types for object shapes
- Use proper type annotations for function parameters and return types
- Avoid `any` type, use `unknown` when necessary

### React/NextJS
- Use functional components with hooks
- Prefer server components when possible
- Use proper error boundaries
- Implement proper loading states

### Database
- Use Prisma for all database operations
- Implement proper error handling
- Use transactions for multi-table operations
- Validate all inputs with Zod schemas

### Authentication
- Use NextAuth.js for all authentication
- Implement proper session management
- Use HTTP-only cookies for session storage
- Validate all auth operations server-side

## Recent Changes

### 002-vibevault-landing-auth (2025-01-27)
- **Added**: NextJS 14 with App Router setup
- **Added**: NextAuth.js authentication system
- **Added**: PostgreSQL database with Prisma ORM
- **Added**: Tailwind CSS with shadcn/ui components
- **Added**: TypeScript configuration and validation schemas
- **Added**: Complete authentication flow (register, login, logout)
- **Added**: Responsive landing page design
- **Added**: API contracts and data models

<!-- MANUAL ADDITIONS START -->
## Development Notes

### Authentication Flow
- Users can register with email/password
- Sessions managed with NextAuth.js
- Password hashing with bcrypt (12 rounds)
- Email verification planned for future

### Database Schema
- User table with NextAuth.js compatibility
- Proper foreign key relationships
- Indexes for performance optimization
- GDPR compliance considerations

### Security
- HTTPS enforced in production
- CSRF protection via NextAuth.js
- Input validation with Zod schemas
- Rate limiting on auth endpoints

### Performance
- Static generation for landing page
- Image optimization with NextJS Image
- Database connection pooling
- CDN for static assets

<!-- MANUAL ADDITIONS END -->
